---
layout: post
title:  "타이틀"
description: ""
author: chanspark
image: ""
date: 2017-08-04 20:30:00 +0900
tags: [wilt]
comments: true
published: false
---

## 수정된 값만 서버에 전송하기
ajax통신으로 서버에 요청을 보낼때는 특정 method를 사용합니다. 이번 포스트에서는 PUT, PATCH요청을 보낼때 특정 값이 변경되지 않았으면 보내지 않는 방법을 '쉽고' '재사용'이 가능하도록 만들어보겠습니다.
> 기존의 값이 `input`에 저장되어있는 상황을 가정하에 기능을 구현해보겠습니다. 

1. 기존 데이터값을 저장해둔다.
2. '수정' 버튼을 누름과 동시에 값이 변경되었는지 점검.
3. 변경되었으면 값을 넘겨줌.

이렇게 작동하도록 만들면 될거 같은데 흠.... 뭔가 예상치 못한 문제점이 있을 수도 있겠죠!

### 기존 데이터값 저장하기
먼저 `input` 태그에 `onclick` 이벤트를 걸어서 클릭할때마다 함수를 실행시킵니다.

``` html
<input type="text" onclick="saveValue(this);">
```
``` javascript
// 함수 코드
var saveValue = function(param) {
	// 실행
}
```

함수를 실행시키면 클릭한 `input`의 값을 저장하는 별도의 `input`을 생성합니다. 생성되는 `input`의 `id`값은 기존 input과 동일하게 만들되, 뒤에 특정 string을 달아줍니다. 저는 '_copy'를 달기로 했습니다.

``` javascript
var saveValue = function(param) {
	
	var prevVal = $(param).val(); // (1)
	var eId = $(param).attr('id'); // (2)
	
	if ($('#' + eId + '_copy').length > 0) { // (3)
	    return;
	} else { // (4)
	    $(param).parent().append('<input id="' + eId + '_copy" type="hidden" value="' + prevVal + '">');
	}
	
}
``` 

1. `input` 값의 기존 value를 변수에 저장합니다.
2. `input`의 id를 저장합니다.
3. 기존 `input`의 eId_copy를 가진 요소가 있을 경우 그냥 return, 아닐경우 `input`의 형제 요소로 eId_copy값을 부여한 input에 prevVal을 저장합니다.

### '수정' 버튼으로 값이 변경되었는지 확인하기

 






